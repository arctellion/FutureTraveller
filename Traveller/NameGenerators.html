<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Names</title>
</head>

<body>
    <style>
        body{
            background-color:black;
            color:white;
        }
        body.light{
            background-color:white;
            color:black;
        }
        .themecontrols{
            font-family:'Consolas','Inconsolas','Courier New', Courier, monospace;
            font-size:1.2rem;
        }
        fieldset{
            font-family:'Consolas','Inconsolas','Courier New', Courier, monospace;
            display:inline-block;
            vertical-align: text-top;
        }
        fieldset legend{
            cursor:pointer;
            user-select: none;
        }
        fieldset legend:hover{
            color:red;
        }
        fieldset.collapsed *:not(legend){
            display:none;
        }
        fieldset > legend::before{
            content:"▼ ";
        }
        fieldset.collapsed > legend::before{
            content:"► ";
        }
        .flexctr{
            display:flex;
            flex-direction: row-reverse;
        }
        .sidebar{
            flex-grow:1;
            border:1px solid black;
            border-radius: 1rem;
            padding: 0.5rem;
        }
        .flexchld{
            flex-grow:4;
        }
    </style>
    <script src="js/NameGenerator.js" type="module"></script>
    <script src="js/names.js" type="module"></script>
    <script type="module">
        import { NameGenerator } from "../js/NameGenerator.js";
        import { getNames } from "../js/names.js";
        
   </script>
    <div class="flexctr">
        <div class="sidebar">
        </div>
        <div class="flexchld">
            <fieldset class="collapsed">
            <legend>Anglic Words</legend>
        <input type="button" id="btnWord" name="btnWord" value="Word" data-key="word" /> 
        <span data-for="btnWord" >Generate a word using English phonotactics</span>
        <hr/>
        <input type="button" id="btnWord1" name="btnWord1" value="One-Syllable Word" data-key="word.1sylword" /> 
        <span data-for="btnWord1" >Generate a one-syllable word using English phonotactics</span>
        <hr/>
        <input type="button" id="btnWord2" name="btnWord2" value="Two-Syllable Word" data-key="word.2sylword" /> 
        <span data-for="btnWord2" >Generate a two-syllable word using English phonotactics</span>
        <hr/>
        <input type="button" id="btnWord3" name="btnWord3" value="Three-Syllable Word" data-key="word.3sylword" /> 
        <span data-for="btnWord3" >Generate a three-syllable word using English phonotactics</span>
        <hr/>
        <input type="button" id="btnWordPattern" name="btnWordPattern" value="Word Pattern" data-patt="word" /> 
        <span data-for="btnWordPattern" >Generate a word pattern using English phonotactics</span>
    </fieldset><br/>
    <fieldset class="collapsed">
        <legend>Aslan Words</legend>
        <input type="button" id="btnAslan" name="btnAslan" value="Aslan Word" data-key="aslan" /> 
        <span data-for="btnAslan" >Generate a word using Aslan phonotactics</span>
        <hr/>
        <input type="button" id="btnAslan1" name="btnAslan1" value="One-Syllable Aslan Word" data-key="aslan.1sylword" /> 
        <span data-for="btnAslan1" >Generate a one-syllable Aslan word</span>
        <hr/>
        <input type="button" id="btnAslan2" name="btnAslan2" value="Two-Syllable Aslan Word" data-key="aslan.2sylword" /> 
        <span data-for="btnAslan2" >Generate a two-syllable Aslan word</span>
        <hr/>
        <input type="button" id="btnAslan3" name="btnAslan3" value="Three-Syllable Aslan Word" data-key="aslan.3sylword" /> 
        <span data-for="btnAslan3" >Generate a three-syllable Aslan word</span>
        <hr/>
        <input type="button" id="btnAslan4" name="btnAslan4" value="Four-Syllable Aslan Word" data-key="aslan.4sylword" /> 
        <span data-for="btnAslan4" >Generate a four-syllable Aslan word</span>
        <hr/>
        <input type="button" id="btnAslan5" name="btnAslan5" value="Five-Syllable Aslan Word" data-key="aslan.5sylword" /> 
        <span data-for="btnAslan5" >Generate a five-syllable Aslan word</span>
        <!-- <hr/>
            <input type="button" id="btnAslan6" name="btnAslan6" value="Six-Syllable Aslan Word" data-key="aslan.6sylword" /> 
        <span data-for="btnAslan6" >Generate a six-syllable Aslan word</span>
        // -->
    </fieldset><br/>
    <fieldset class="collapsed">
        <legend>People Names</legend>
        <input type="button" id="btnHuman" name="btnHuman" value="Full Name" data-key="human" /> 
        <span data-for="btnHuman" >Generate a full name</span>
        <hr/>
        <input type="button" id="btnHumanFemale" name="btnHumanFemale" value="Female" data-key="human.femalefirstname" /> 
        <span data-for="btnHumanFemale" >Generate a female given name</span>
        <span>&nbsp;</span>
        <input type="button" id="btnHumanMale" name="btnHumanMale" value="Male" data-key="human.malefirstname" /> 
        <span data-for="btnHumanMale" >Generate a male given name</span>
        <hr/>
        <input type="button" id="btnHumanLName" name="btnHumanLName" value="Surname" data-key="human.lastname" /> 
        <span data-for="btnHumanLName" >Generate a surname</span>
        <hr/>
        <input type="button" id="btnInventLName" name="btnInventLName" value="Composite Surname" data-key="human.combinedlastname" /> 
        <span data-for="btnInventLName" >Invent a composite surname</span>
        
    </fieldset><br/>
    <fieldset class="collapsed">
        <legend>System Names</legend>
        <input type="button" id="btnSystem" name="btnSystem" value="System" data-key="system" /> 
        <span data-for="btnSystem" >Generate a planet name</span>
        <hr/>
        <input type="button" id="btnLatinizedSystemName" name="btnLatinizedSystemName" value="Fake Latin System" data-key="system.latinized" /> 
        <span data-for="btnLatinizedSystemName" >Generate a solar system name with an invented word and fake Latin/Greek suffix</span>
        <hr/>
        <input type="button" id="btnSystemwithoutinventedwords" name="btnSystemwithoutinventedwords" value="System Without Invented Words" data-key="system.systemwithoutinventedwords" /> 
        <span data-for="btnSystemwithoutinventedwords" >Generate a solar system name without invented words</span>
        <hr/>
        <input type="button" id="btnPastoralSystemName" name="btnPastoralSystemName" value="Pastoral System Name" data-key="system.pastoral" /> 
        <span data-for="btnPastoralSystemName" >Generate a pastoral solar system name</span>
        <hr/>
        <input type="button" id="btnSystemPattern" name="btnSystemPattern" value="System Pattern" data-patt="system" /> 
        <span data-for="btnSystemPattern" >Generate a system pattern</span>
    </fieldset><br/>
    <fieldset class="collapsed">
        <legend>Ship Names</legend>
        <input type="button" id="btnShip" name="btnShip" value="Ship Name" data-key="ship" /> 
        <span data-for="btnShip" >Generate a starship name</span>
        <hr/>
        <input type="button" id="btnShipYacht" name="btnShipYacht" value="Stupid Pun" data-key="ship.yacht" /> 
        <span data-for="btnShipYacht" >Generate a punny starship name</span>
        <hr/>
        <input type="button" id="btnShipNoPun" name="btnShipNoPun" value="No Puns" data-key="ship.nopun" /> 
        <span data-for="btnShipNoPun" >Generate a starship name without stupid puns</span>
        <hr/>
        <input type="button" id="btnShipNaval" name="btnShipNaval" value="Naval" data-key="ship.navalname" /> 
        <span data-for="btnShipNaval" >Generate a likely naval starship name</span>
        <hr/>
        <input type="button" id="btnShipRoyal" name="btnShipRoyal" value="Royal Navy" data-key="ship.royalnavy" /> 
        <span data-for="btnShipRoyal" >Pull a name from the Royal Navy</span>
    </fieldset><br/>
    <fieldset class="collapsed">
        <legend>Animal Names</legend>
        <input type="button" id="btnAnimal" name="btnAnimal" value="Animal Name" data-key="animal" /> 
        <span data-for="btnAnimal" >Generate an animal name</span>
    </fieldset><br/>
    <fieldset class="collapsed">
        <legend>Festivals</legend>
        <input type="button" id="btnFestival" name="btnFestival" value="Festival Name" data-key="festival" data-caps="false" /> 
        <span data-for="btnFestival" >Generate an festival name</span>
    </fieldset>
</div>
</div>
<div class="themecontrols">
    <label for="chkDarkmode">
    <input id="chkDarkmode" type="checkbox" checked="checked">Dark Mode</label>
</div>
    <div class="footer">The Traveller game in all forms is owned by Far Future Enterprises. Copyright © 1977 – 2023 <a
        href="http://www.farfuture.net/" target="_blank">Far Future Enterprises</a>.</div>
<script>
    setTimeout(function(){
        //NameGenerator("js/names.jsonc",addEventListeners);
    window.globalThis.NameGenerator(window.globalThis.getNames(), addEventListeners, null, Math.random,true);
    function removeChildElements(element) {
        while (element.childNodes.length > 0) {
            element.removeChild(element.childNodes[element.childNodes.length - 1]);
        }
    }
    function addEventListeners(generator){
        window.globalThis.getRandomNameWithKeyChain = generator.getRandomNameWithKeyChain;
        var chkDarkmode = document.getElementById("chkDarkmode");
        chkDarkmode.addEventListener("change",function(){
            if(document.body.className === "light"){ document.body.classList.remove("light"); }else{
                document.body.classList.add("light");
            }
        })
            var buttons = document.querySelectorAll("input[data-key]");
            for(var i = 0, len = buttons.length; i < len; i++){
                var button = buttons[i];
                button.addEventListener("click",function(e){
                    var localAddCaps = addCaps;
                    var key = e.srcElement.getAttribute("data-key");
                    if(e.srcElement.getAttribute("data-caps")){
                        if(e.srcElement.getAttribute("data-caps") === "false"){
                            localAddCaps = function(x){return x;};
                        }
                    }
                    var value = generator.getRandomName(key);
                    
                    var btnName = e.srcElement.getAttribute("name");
                    var label = document.querySelector("span[data-for=\""+btnName+"\"]");
                    label.innerText = localAddCaps(value);
                    var sidebar = document.querySelector(".sidebar");
                    removeChildElements(sidebar);
                    sidebar.appendChild(document.createTextNode("More " + e.srcElement.value + " Examples"));
                    var ol = sidebar.appendChild(document.createElement("ol"));
                    ol.appendChild(document.createElement("li")).appendChild(document.createTextNode(localAddCaps(value)));
                    for(var i = 0; i < 9; i++){
                        ol.appendChild(document.createElement("li")).appendChild(document.createTextNode(localAddCaps(generator.getRandomName(key))));
                    }
                });
            }
            var patternButtons = document.querySelectorAll("input[data-patt]");
            for(var i = 0, len = patternButtons.length; i < len; i++){
                var button = patternButtons[i];
                button.addEventListener("click",function(e){
                    var key = e.srcElement.getAttribute("data-patt");
                    var value = generator.getRandomNameAndPattern(key);
                    var btnName = e.srcElement.getAttribute("name");
                    var label = document.querySelector("span[data-for=\""+btnName+"\"]");
                    label.innerHTML = addCaps(value.name) + "<br/>" + value.pattern;
                    var sidebar = document.querySelector(".sidebar");
                    removeChildElements(sidebar);
                    sidebar.appendChild(document.createTextNode("More " + e.srcElement.value + " Examples"));
                    var ol = sidebar.appendChild(document.createElement("ol"));
                    ol.appendChild(document.createElement("li")).appendChild(document.createTextNode(addCaps(value.name)));
                    for(var i = 0; i < 9; i++){
                        var result = generator.getRandomNameAndPattern(value.pattern).name; console.log(result);
                        ol.appendChild(document.createElement("li")).appendChild(document.createTextNode(addCaps(result)));
                    }
                });
            }
            var collapserHandles = document.querySelectorAll("fieldset legend");
                for(var i = 0, len = collapserHandles.length; i < len; i++){
                    var handle = collapserHandles[i];
                    handle.addEventListener("click",function(e){
                        var parent = e.target.parentElement;
                        if(parent.classList.contains("collapsed")){
                            parent.classList.remove("collapsed");
                        }else{
                            parent.classList.add("collapsed");
                        }
                    });
                }
        }
        function addCaps(text) {
            var capitalizedString = "";
            var lastCharacter = null, currCharacter = " ";
            for (var i = 0, len = text.length; i < len; i++) {
                lastCharacter = currCharacter;
                currCharacter = text[i];
                if (lastCharacter === " " || lastCharacter === "-") {
                    capitalizedString += currCharacter.toUpperCase();
                } else {
                    capitalizedString += currCharacter;
                }
            }
            return capitalizedString;
        }
        
    },1000)
    
    </script>
</body>

</html>
