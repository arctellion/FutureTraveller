<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T5 Character Generator</title>
    <script src="js/names.js"></script>
    <script src="js/NameGenerator.js"></script>
    <script src="js/SystemGenerator.js"></script>
    <script src="js/CharacterGenerator.js"></script>
</head>
<body>
    <style>
        body{background: black; color:white}
    </style>
    <div>
        <fieldset>
            <legend>Options</legend>
            Integrated die roller: <label for="rdIntegratedRoller_on"><input type="radio" id="rdIntegratedRoller_on" checked="on" name="rdIntegratedRoller">On</label>&nbsp;<label for="rdIntegratedRoller_off"><input type="radio" id="rdIntegratedRoller_off" value="off" name="rdIntegratedRoller">Off</label><br>
            Random Homeworld: <label for="rdRandHomeworld_on"><input type="radio" id="rdRandHomeworld_on" value="on" checked="on" name="rdRandHomeworld">Random</label>&nbsp;<label for="rdRandHomeworld_off"><input type="radio" id="rdRandHomeworld_off" value="off" name="rdRandHomeworld">Manual</label><br>
        </fieldset>
        <input type="button" id="btnCreateCharacter" value="Create a Character">
    </div>
    <script>
        var names = getNames();
        MathRandom = Math.random;
        
        NameGenerator(names, setup, null, MathRandom, true);
        function setup(generator) {
            generator.setRandom(MathRandom);
            document.getElementById("btnCreateCharacter").addEventListener("click",function(){
                    var name = addCaps(generator.getRandomName("human"));
                    var homeworld = generateSystemDetails(
                        addCaps(generator.getRandomName("system")),
                        8, // gas giant frequency
                        16 // max tech level
                    );
                    var character = createCharacter(name, homeworld, d6, function(desc,choices){return Math.random()*choices.length >>> 0;})
                    console.log(character);
                });
        }
        function addCaps(text) {
            var capitalizedString = "";
            var lastCharacter = null, currCharacter = " ";
            if (typeof text === "undefined") { return text; }
            for (var i = 0, len = text.length; i < len; i++) {
                lastCharacter = currCharacter;
                currCharacter = text[i];
                if (lastCharacter === " " || lastCharacter === "-") {
                    capitalizedString += currCharacter.toUpperCase();
                } else {
                    capitalizedString += currCharacter;
                }
            }
            return capitalizedString.trimEnd();
        }
    </script>
</body>
</html>