<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mongoose 2nd Edition ShipBuilder</title>
</head>
<body>
    <style></style>
    This tool guides the creation of starships using the Mongoose Traveller 2nd Edition Core Rulebook 2022 "Spacecraft Construction" rules.
    <div id="controls">

    </div>
    <script>
        // EFFECTS - have a key that indicates which Ship attribute they modify
        // type multiplier - lookup - multiplier; calculates value from other and adds to key attribute
        // type minimum - value; increases key attribute to minimum value
        // type addition - value; directly adds to key attribute
var components = [
            {
                type:"Hull",
                key:"Hull",
                configurable:[
                    {
                        key:"Tons",
                        type:"number",
                        effects:[
                            {
                                key:"Ship Tonnage",
                                type:"multiplier",
                                lookup:"Tons",
                                multiplier:1
                            },
                            {
                                key:"Available Tons",
                                type:"multiplier",
                                lookup:"Tons",
                                multiplier:1
                            }
                        ]
                    },
                    {
                        key:"Configuration",
                        type:"choice",
                        options:[
                            {
                                value:"Standard",
                                effects:[
                                    {
                                        key:"Cost",
                                        type:"multiplier",
                                        lookup:"Tons",
                                        multiplier:50000
                                    },
                                    {
                                        key:"Hull Points",
                                        type:"multiplier",
                                        lookup:"Tons",
                                        multiplier:.4
                                    }
                                ]
                            },
                            {
                                value:"Streamlined",
                                effects:[
                                    {
                                        key:"Cost",
                                        type:"multiplier",
                                        lookup:"Tons",
                                        multiplier:60000
                                    },
                                    {
                                        key:"Hull Points",
                                        type:"multiplier",
                                        lookup:"Tons",
                                        multiplier:.4
                                    }
                                ]
                            },
                            {
                                value:"Dispersed",
                                effects:[
                                    {
                                        key:"Cost",
                                        type:"multiplier",
                                        lookup:"Tons",
                                        multiplier:25000
                                    },
                                    {
                                        key:"Hull Points",
                                        type:"multiplier",
                                        lookup:"Tons",
                                        multiplier:.36
                                    }
                                ]
                            }
                        ]

                    }
                ]
            },
            {
                type:"Drives",
                key:"M-Drive",
                configurable:[
                    {
                        key:"Thrust Rating",
                        type:"choice",
                        options:[
                        {
                                value:"1 (TL9)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.01
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.01
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.1
                                    }                                    
                                ]
                            },
                            {
                                value:"2 (TL10)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.02
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.02
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.2
                                    }                                    
                                ]
                            },
                            {
                                value:"3 (TL10)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.03
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.03
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.3
                                    }                                    
                                ]
                            },
                            {
                                value:"4 (TL11)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.04
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.04
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.4
                                    }                                    
                                ]
                            },
                            {
                                value:"5 (TL11)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.05
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.05
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.5
                                    }                                    
                                ]
                            },
                            {
                                value:"6 (TL12)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.06
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.06
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.6
                                    }                                    
                                ]
                            },
                            {
                                value:"7 (TL12)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.07
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.07
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.7
                                    }                                    
                                ]
                            },
                            {
                                value:"8 (TL13)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.08
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.08
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.8
                                    }                                    
                                ]
                            },
                            {
                                value:"9 (TL13)",
                                effects:[
                                    {
                                        key:"M-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.09
                                    },
                                    {
                                        key:"Available Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.09
                                    },
                                    {
                                        key:"Power",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:-0.9
                                    }                                    
                                ]
                            }
                        ],
                        effects:[
                            {
                                key:"Cost",
                                type:"multiplier",
                                lookup:"M-Drive Tons",
                                multiplier:2
                            }
                        ]
                    }
                ]
            },
            {
                type:"Drives",
                key:"J-Drive",
                configurable:[
                    {
                        key:"Jump Rating",
                        type:"choice",
                        options:[
                            {
                                value:"1 (TL9)",
                                effects:[
                                    {
                                        key:"J-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.025
                                    },
                                    {
                                        key:"Power Required For Jump",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.1
                                    }                                    
                                ]
                            },
                            {
                                value:"2 (TL11)",
                                effects:[
                                    {
                                        key:"J-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.05
                                    },
                                    {
                                        key:"Power Required For Jump",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.2
                                    }                                    
                                ]
                            },
                            {
                                value:"3 (TL12)",
                                effects:[
                                    {
                                        key:"J-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.075
                                    },
                                    {
                                        key:"Power Required For Jump",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.3
                                    }                                    
                                ]
                            },
                            {
                                value:"4 (TL13)",
                                effects:[
                                    {
                                        key:"J-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.1
                                    },
                                    {
                                        key:"Power Required For Jump",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.4
                                    }                                    
                                ]
                            },
                            {
                                value:"5 (TL14)",
                                effects:[
                                    {
                                        key:"J-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.125
                                    },
                                    {
                                        key:"Power Required For Jump",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.5
                                    }                                    
                                ]
                            },
                            {
                                value:"6 (TL15)",
                                effects:[
                                    {
                                        key:"J-Drive Tons",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.15
                                    },
                                    {
                                        key:"Power Required For Jump",
                                        type:"multiplier",
                                        lookup:"Ship Tonnage",
                                        multiplier:0.6
                                    }                                    
                                ]
                            }
                            
                        ],
                        effects:[
                        {
                                key:"J-Drive Tons",
                                type:"addition",
                                value:5
                            },
                            {
                                key:"J-Drive Tons",
                                type:"minimum",
                                value:10
                            },
                            {
                                key:"Cost",
                                type:"multiplier",
                                lookup:"J-Drive Tons",
                                multiplier:1.5
                            }
                        ]
                    }
                ]
            },
            {
                type:"Power Plant",
                key:"Fusion Power Plant",
                configurable:[
                    {
                        key:"Tons",
                        type:"number",
                        default:4
                    },
                    {
                        key:"TL",
                        type:"choice",
                        options:[
                        {
                                value:8,
                                effects:
                                    [
                                        {
                                            key:"Cost",
                                            type:"multiplier",
                                            lookup:"Tons",
                                            multiplier:0.5
                                        },
                                        {
                                            key:"Power",
                                            type:"multiplier",
                                            lookup:"Tons",
                                            multiplier:10
                                        }
                                    ]
                            },
                            {
                                value:12,
                                effects:
                                    [
                                        {
                                            key:"Cost",
                                            type:"multiplier",
                                            lookup:"Tons",
                                            multiplier:1
                                        },
                                        {
                                            key:"Power",
                                            type:"multiplier",
                                            lookup:"Tons",
                                            multiplier:15
                                        }
                                    ]
                            },{
                                value:15,
                                effects:
                                    [
                                        {
                                            key:"Cost",
                                            type:"multiplier",
                                            lookup:"Tons",
                                            multiplier:2
                                        },
                                        {
                                            key:"Power",
                                            type:"multiplier",
                                            lookup:"Tons",
                                            multiplier:20
                                        }
                                    ]
                            }
                        ]
                    }
                    
                ],
                effects:[
                    {
                        key:"Available Tons",
                        type:"multiplier",
                        lookup:"Tons",
                        multiplier:-1
                    }
                ]
            }
            
        ]
    
        // Hull: 50,000 cr per ton
        var categories = {};
        for(var i = 0, len = components.length; i < len; i++){
            var component = components[i];
            var container;
            if(categories[component.type]){
                container = document.getElementById(categories[component.type]);
            }else{
                var newId = "Category-"+component.type.replace(/\s/g,"");
                categories[component.type] = newId;
                container = document.getElementById("controls").appendChild(document.createElement("fieldset"));
                container.id = newId;
                container.appendChild(document.createElement("legend")).appendChild(document.createTextNode(component.type));
            }
            var innerContainer = container.appendChild(document.createElement("div"));
            innerContainer.className = "innerContainer";
            innerContainer.appendChild(document.createElement("span")).appendChild(document.createTextNode(component.key));
            for(var j = 0, jlen = component.configurable.length; j < jlen; j++){
                var detail = component.configurable[j];
                console.log(detail);
                switch(detail.type){
                    case "number": 
                    innerContainer.appendChild(document.createElement("span")).appendChild(document.createTextNode(detail.key));
                    break;
                    case "choice": 
                    innerContainer.appendChild(document.createElement("span")).appendChild(document.createTextNode(detail.key));
                    break;
                }
            }
        }
    
    </script>        
</body>
</html>