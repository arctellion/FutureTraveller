<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traveller Sophont Creation System</title>
    <script src="js/NameGenerator.js"></script>
    <script src="js/SystemGenerator.js"></script>
    <script src="js/SophontGenerator.js"></script>
</head>
<style>
    h1,h2,h3{ margin:0px; font-weight:normal;}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";}
    body.dark{background-color: rgb(13, 17, 23); color: #fff;  text-shadow:0px 1px 2px black;}
    body.light{background-color: #fff; color: #000;}
    body.dark strong{color:#a8d3e8; font-family: Bahnschrift,-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";}
    table, tr, td{vertical-align: top;}
    body.light table.table{ box-shadow:1px 1px 3px #555; border-radius:0.3rem; border-collapse:collapse; overflow:hidden; border:0.1rem solid black; display:inline-block; vertical-align: text-top;}
    body.dark table.table{ border-radius:0.3rem; border-collapse:collapse; overflow:hidden; border:1px solid rgba(56, 139, 253, 0.4); display:inline-block; vertical-align: text-top;}
    body.light .table tr:first-child{ border-bottom:1px solid black; background-color:#dfdfdf;}
    body.dark .table tr:first-child{ border-bottom:1px solid rgb(48, 54, 61); background-color:rgba(56, 139, 253, 0.15);}
    body.light .table tr:nth-child(even){ background-color:#f0f0f0;}
    body.dark .table tr:nth-child(even){ background-color:rgb(22, 27, 34);}
    .table th, .table th td{text-align:left; font-weight:bold; vertical-align:text-top; }
    body.light .table td + td, .table th + th{border-left:0.01rem solid black;}
    body.dark .table td + td, .table th + th{border-left:0.01rem solid rgb(48, 54, 61);}
    .table td:empty, .table th:empty{border:0px solid transparent !important; }
    .hidden{display:none;}
    body.dark fieldset{ border:1px solid rgb(48, 54, 61);}
    fieldset{
            display:inline-block;
            vertical-align: text-top;
        }
        fieldset legend{
            cursor:pointer;       
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        fieldset legend:hover{
            color:red;
        }
        fieldset > fieldset{
            background-color:rgba(0,0,0,0.05);
        }
        fieldset *{
            line-height:1.5em;
        }
        fieldset.collapsed *:not(legend){
            display:none;
        }
        fieldset > legend::before{
            content:"▼ ";
        }
        fieldset.collapsed > legend::before{
            content:"► ";
        }
        input[type=button], label[for='btnImportJSON'],select{
            background-color:rgb(33, 38, 45); color:white;
            cursor:pointer;
            
            border-radius: 0.5rem;
            padding:0.4rem;
            font-family:Bahnschrift;
            font-size: 1rem;
            box-shadow:1px 2px 3px #555;
            margin-bottom:3px;
        }
        label[for='btnImportJSON'], select{
            border:2px solid black;
            padding: 0.5rem;
        }
        input[type=button]:hover, label[for='btnImportJSON']:hover, select:hover{
            background-color:red;
        }
        input[type=file]{width:0px; opacity:0;}
        label{ font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; user-select: none; -ms-user-select: none; -webkit-user-select: none; -moz-user-select: none;;}
        @media (min-width:769px){
            .jsonbuttons{ display:inline-block; text-align:right;}
        }
        @media (max-width:768px){
            .jsonbuttons{ display:block; width:100%; text-align:right;}
        }
        table label{text-align:right;}
        .traitlist ul{list-style:none; padding:0px; margin:0px;}
        .traitlist li{padding-left:2rem;}
</style>
<body class="dark">
    <h1>Traveller Sophont Creation System</h1>
    <div>
        <span style="display:inline-block; min-width:30rem; text-align:left;">
            <input type="button" id="btnGenerate" value="Generate Sophont" />
            <label for="chkUseRandom"><input id="chkUseRandom" type="checkbox" checked="checked"> Use Random Seed</label>
            <label for="txtSeed"><input title="random seed" id="txtSeed" type="text"></label>
        </span>
        <span style="display:inline-block; min-width:20rem; text-align:left;">
            <label for="chkRandomHomeworld"><input id="chkRandomHomeworld" type="checkbox" checked="checked"> Use Random Homeworld</label>
        </span>
        <div class="jsonbuttons">
            <span style="display:inline-block;">
                
                <input type="button" value="Save as .json" id="btnExportJSON"/>
                <label role="button" for="btnImportJSON">Load from .json<input type="file" Text="Import JSON" id="btnImportJSON" accept="text/*,.json"/></label>
                <select title="Select theme" name="slctStyle" id="slctStyle">
                    <option value="light">Light Theme</option>
                    <option selected="selected" value="dark">Dark Theme</option>
                </select>
            </span>
        </div>
    </div>
    <hr />
    <div id="homeworldcontainer" class="hidden">
        <h2>Specify Homeworld Details</h2>
        <table>
            <tr>
                <td>
                    <label for="inWorldName">World Name:</label>
                </td>
                <td><input type="text" id="inWorldName" title="inWorldName" placeholder="World Name"></td>
            </tr>
            <tr>
                <td><label for="inUWP">UWP: </label></td>
                <td><input type="text" id="inUWP" title="inUWP" placeholder="UWP"></td>
            </tr>
            <tr>
                <td><label for="inStarType">Star Type: </label></td>
                    <td><input type="text" id="inStarType" title="inStarType" placeholder="StarType"></td>
            </tr>
            <tr>
                <td><label for="inStarSize">Star Size:</label></td>
                <td><input type="text" id="inStarSize" title="inStarSize" placeholder="StarSize"></td>
            </tr>
            <tr>
                <td>
                    <label for="inStarDecimal">Star Decimal: </label>
                </td>
                <td><input type="text" id="inStarDecimal" title="inStarDecimal" placeholder="StarDecimal"></td>
            </tr>
            <tr>
                <td><label for="inTradeCodes">Trade Codes: </label></td>
                <td><input type="text" id="inTradeCodes" title="inTradeCodes" placeholder="TradeCodes"></td>
            </tr>
            </table>
        <hr>
    </div>
    <h2 id="name"></h2>
    <table>
        <tr>
            <td rowspan="2">
                <fieldset>
                    <legend>Physical Appearance</legend>
                    <div><strong>Locomotion:</strong> <span data-detail="locomotion" data-source="species"></span></div>
                    <div><strong>Symmetry: </strong><span data-detail="symmetry" data-source="species"></span> &nbsp; <strong>Stance: </strong></strong><span data-detail="stance" data-source="species"></span></div>
                    <div><strong>Size:</strong> <span data-detail="sizeclass" data-source="species"></span> (<span data-detail="size" data-source="species"></span> kg, <span data-detail="height" data-source="species"></span>)
                    </div>
                    <div><strong>Profile:</strong>&nbsp;<span data-detail="bfp" data-source="species"></span> (<span data-detail="bfpdesc" data-source="species"></span>)</div>
                    <div><strong>Manipulators: </strong><span data-detail="allmanipulators" data-source="species"></span></div>
                    <div><strong>Natural Weapon: </strong><span data-detail="naturalweapon" data-source="species"></span></div>
                    <div><strong>Body Covering: </strong><span data-detail="skin" data-source="species"></span> &nbsp;
                    <strong>Odor Profile:&nbsp;</strong><span data-detail="scent" data-source="species"></span></div>
                    <div><strong>Skeletal Structure: </strong><span data-detail="skeleton" data-source="species"></span> </div>
                    <div>
                        <strong>Body Fluids:&nbsp;</strong><span data-detail="fluids" data-source="species"></span>
                    </div>
                    <div><strong>Other Features: </strong><span class="traitlist" data-html="true" data-detail="uniqueTraitDesc" data-source="species">None</span></div>
                    <div><strong>Body Plan: </strong><span data-detail="bodystructure" data-source="species"></span></div>
                    <table class="table">
                        <tr>
                            <th>Segment</th>
                            <th>Value</th>
                            <th>Limbs</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>Head</td>
                            <td><span data-detail="head" data-source="species"></span></td>
                            <td> </td>
                            <td><span data-detail="headdesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Torso</td>
                            <td><span data-detail="torso" data-source="species"></span></td>
                            <td> </td>
                            <td><span data-detail="torsodesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Front Limbs</td>
                            <td><span data-detail="frontlimbs" data-source="species"></span></td>
                            <td><span data-detail="frontlimbs1" data-source="species"></span> <span data-detail="frontlimbs2" data-source="species"></span></td>
                            <td><span data-detail="frontlimbsdesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Rear Limbs</td>
                            <td><span data-detail="rearlimbs" data-source="species"></span></td>
                            <td><span data-detail="rearlimbs1" data-source="species"></span> <span data-detail="rearlimbs2" data-source="species"></span></td>
                            <td><span data-detail="rearlimbsdesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Other</td>
                            <td><span data-detail="tail" data-source="species"></span></td>
                            <td><span data-detail="taillimbs" data-source="species"></span></span></td>
                            <td><span data-detail="taildesc" data-source="species"></span></td>
                        </tr>
                    </table>
                </fieldset>
            </td>
            <td>
                <fieldset>
                    <legend>Habitat</legend>
                    <div><strong>Homeworld:</strong> <span data-detail="name" data-source="homeworld"></span> <span data-detail="uwp" data-source="mainworld"></span> <span data-detail="tradecodes" data-source="homeworld"></span></div>
                    <div><strong>Home Star:</strong> <span data-detail="homestar" data-source="species"></span></div>
                    <div><strong>Native Terrain:</strong> <span data-detail="nativeTerrain" data-source="species"></span></div>
                    <div><strong>Acclimation:</strong> <span data-detail="climate" data-source="species"></span></div>
                    <div><strong>Locomotion:</strong> <span data-detail="locomotion" data-source="species"></span></div>
                    <div><strong>Niche:</strong> <span data-detail="class" data-source="species"></span> (<span data-detail="niche" data-source="species"></span>)</div>
                    <div><strong>Breathes:</strong> <span data-detail="breathes" data-source="species"></span></div>
                </fieldset>
                </td>
        </tr>
        <tr>
            <td colspan="2">
                <fieldset>
                    <legend>Senses</legend>
                    <table class="table">
                        <tr>
                            <th>Sense</th>
                            <th>Capability</th>
                            <th>Notes</th>
                        </tr>
                        <tr>
                            <td>Vision</td>
                            <td><span data-detail="vision" data-source="species"></span></td>
                            <td>
                                <span data-detail="visiondesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Hearing</td>
                            <td><span data-detail="hearing" data-source="species"></span></td>
                            <td><span data-detail="hearingdesc" data-source="species"></span><br/>
                                <span data-detail="hearingrangedesc" data-source="species"></span>
                                <br/><span data-detail="voicedesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Smell</td>
                            <td><span data-detail="smell" data-source="species"></span></td>
                            <td><span data-detail="smelldesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Touch</td>
                            <td><span data-detail="touch" data-source="species"></span></td>
                            <td><span data-detail="touchdesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Aware</td>
                            <td><span data-detail="aware" data-source="species"></span></td>
                            <td><span data-detail="awaredesc" data-source="species"></span></td>
                        </tr>
                        <tr>
                            <td>Percept</td>
                            <td><span data-detail="percep" data-source="species"></span></td>
                            <td><span data-detail="percepdesc" data-source="species"></span></td>
                        </tr>
                    </table>
                    <div><strong>Note:</strong> Human senses are V-16-RGB, H-16-938, S-10-02, and T-06-02</div>
                </fieldset>
            </td>
        </tr>
        <tr>
            <td><fieldset>
                <legend>Life and Society</legend>
                <div><strong>Language: </strong><span data-detail="language" data-source="species"></span></div>
                <div><strong>Life Expectancy:</strong> <span data-detail="lifeexpectancy" data-source="species"></span> years</div>
                <div><strong>Genders:</strong> <span data-detail="genderstructure" data-source="species"></span> <strong>Assignment:</strong> <span data-detail="genderassignment" data-source="species"></span> (<span data-detail="gendershift" data-source="species"></span>)</div>
                <div><strong>Caste:</strong> <span data-detail="castestructure" data-source="species">No</span> caste structure <strong>Assignment:</strong> <span data-detail="casteassignment" data-source="species"></span> (<span data-detail="casteshift" data-source="species"></span>)</div>
                <div><strong>Caste-Gender Relation:</strong> <span data-detail="castegenderrelation" data-source="species"></span></div>  
                <table class="table">
                    <tr>
                        <th>#</th>
                        <th>Life Stage</th>
                        <th>Duration</th>
                        <th>Ages</th>
                        <th>Notes</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>Infant</td>
                        <td><span data-detail="lifestages" data-index="0" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="0" data-source="species"></span>-<span data-detail="lifestageupper" data-index="0" data-source="species"></span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Child</td>
                        <td><span data-detail="lifestages" data-index="1" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="1" data-source="species"></span>-<span data-detail="lifestageupper" data-index="1" data-source="species"></span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Teen</td>
                        <td><span data-detail="lifestages" data-index="2" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="2" data-source="species"></span>-<span data-detail="lifestageupper" data-index="2" data-source="species"></span></td>
                        <td>Gender/Caste maturity.</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Young Adult</td>
                        <td><span data-detail="lifestages" data-index="3" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="3" data-source="species"></span>-<span data-detail="lifestageupper" data-index="3" data-source="species"></span></td>
                        <td>Career resolution begins.</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Adult</td>
                        <td><span data-detail="lifestages" data-index="4" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="4" data-source="species"></span>-<span data-detail="lifestageupper" data-index="4" data-source="species"></span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Peak</td>
                        <td><span data-detail="lifestages" data-index="5" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="5" data-source="species"></span>-<span data-detail="lifestageupper" data-index="5" data-source="species"></span></td>
                        <td>Physical aging begins.</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Mid-Life</td>
                        <td><span data-detail="lifestages" data-index="6" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="6" data-source="species"></span>-<span data-detail="lifestageupper" data-index="6" data-source="species"></span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>Senior</td>
                        <td><span data-detail="lifestages" data-index="7" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="7" data-source="species"></span>-<span data-detail="lifestageupper" data-index="7" data-source="species"></span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Elder</td>
                        <td><span data-detail="lifestages" data-index="8" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="8" data-source="species"></span>-<span data-detail="lifestageupper" data-index="8" data-source="species"></span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Retirement</td>
                        <td><span data-detail="lifestages" data-index="9" data-source="species"></span> years</td>
                        <td><span data-detail="lifestagelower" data-index="9" data-source="species"></span>-<span data-detail="lifestageupper" data-index="9" data-source="species"></span></td>
                        <td>Mental aging begins.</td>
                    </tr>
                </table>
                
                
            </fieldset></td>
            <td><fieldset>
                <legend>Genetics and Abilities</legend>
                <div><strong>Genetic Profile:</strong> <span data-detail="geneticprofile" data-source="species"></span>  <strong>DNA:</strong> <span data-detail="dna" data-source="species"></span> </div>
                
                <table class="table">
                    <tr>
                        <th colspan="2"></th>
                        <th colspan="7">Genders</th>
                        <th colspan="7" data-hideifzero="castes" data-source="species">Castes</th>
                    </tr>
                    <tr>
                        <th></th>
                        <th>Baseline</th>
                        <th data-detail="genders" data-index="0" data-source="species"></th>
                        <th data-detail="genders" data-index="1" data-source="species"></th>
                        <th data-detail="genders" data-index="2" data-source="species"></th>
                        <th data-detail="genders" data-index="3" data-source="species"></th>
                        <th data-detail="genders" data-index="4" data-source="species"></th>
                        <th data-detail="genders" data-index="5" data-source="species"></th>
                        <th data-detail="genders" data-index="6" data-source="species"></th>
                        <th data-detail="castes" data-index="0" data-source="species"></th>
                        <th data-detail="castes" data-index="1" data-source="species"></th>
                        <th data-detail="castes" data-index="2" data-source="species"></th>
                        <th data-detail="castes" data-index="3" data-source="species"></th>
                        <th data-detail="castes" data-index="4" data-source="species"></th>
                        <th data-detail="castes" data-index="5" data-source="species"></th>
                        <th data-detail="castes" data-index="6" data-source="species"></th>
                    </tr>
                    <tr>
                        <td><span data-detail="c1" data-source="species"></span></td>
                        <td><span data-detail="c1val" data-source="species"></span></td>
                        <td data-detail="genderc1s" data-index="0" data-source="species"></td>
                        <td data-detail="genderc1s" data-index="1" data-source="species"></td>
                        <td data-detail="genderc1s" data-index="2" data-source="species"></td>
                        <td data-detail="genderc1s" data-index="3" data-source="species"></td>
                        <td data-detail="genderc1s" data-index="4" data-source="species"></td>
                        <td data-detail="genderc1s" data-index="5" data-source="species"></td>
                        <td data-detail="genderc1s" data-index="6" data-source="species"></td>
                        <td data-detail="castec1s" data-index="0" data-source="species"></td>
                        <td data-detail="castec1s" data-index="1" data-source="species"></td>
                        <td data-detail="castec1s" data-index="2" data-source="species"></td>
                        <td data-detail="castec1s" data-index="3" data-source="species"></td>
                        <td data-detail="castec1s" data-index="4" data-source="species"></td>
                        <td data-detail="castec1s" data-index="5" data-source="species"></td>
                        <td data-detail="castec1s" data-index="6" data-source="species"></td>
                    </tr>
                    <tr>
                        <td><span data-detail="c2" data-source="species"></span></td>
                        <td><span data-detail="c2val" data-source="species"></span></td>
                        <td data-detail="genderc2s" data-index="0" data-source="species"></td>
                        <td data-detail="genderc2s" data-index="1" data-source="species"></td>
                        <td data-detail="genderc2s" data-index="2" data-source="species"></td>
                        <td data-detail="genderc2s" data-index="3" data-source="species"></td>
                        <td data-detail="genderc2s" data-index="4" data-source="species"></td>
                        <td data-detail="genderc2s" data-index="5" data-source="species"></td>
                        <td data-detail="genderc2s" data-index="6" data-source="species"></td>
                        <td data-detail="castec2s" data-index="0" data-source="species"></td>
                        <td data-detail="castec2s" data-index="1" data-source="species"></td>
                        <td data-detail="castec2s" data-index="2" data-source="species"></td>
                        <td data-detail="castec2s" data-index="3" data-source="species"></td>
                        <td data-detail="castec2s" data-index="4" data-source="species"></td>
                        <td data-detail="castec2s" data-index="5" data-source="species"></td>
                        <td data-detail="castec2s" data-index="6" data-source="species"></td>
                    </tr>
                    <tr>
                        <td><span data-detail="c3" data-source="species"></span></td>
                        <td><span data-detail="c3val" data-source="species"></span></td>
                        <td data-detail="genderc3s" data-index="0" data-source="species"></td>
                        <td data-detail="genderc3s" data-index="1" data-source="species"></td>
                        <td data-detail="genderc3s" data-index="2" data-source="species"></td>
                        <td data-detail="genderc3s" data-index="3" data-source="species"></td>
                        <td data-detail="genderc3s" data-index="4" data-source="species"></td>
                        <td data-detail="genderc3s" data-index="5" data-source="species"></td>
                        <td data-detail="genderc3s" data-index="6" data-source="species"></td>
                        <td data-detail="castec3s" data-index="0" data-source="species"></td>
                        <td data-detail="castec3s" data-index="1" data-source="species"></td>
                        <td data-detail="castec3s" data-index="2" data-source="species"></td>
                        <td data-detail="castec3s" data-index="3" data-source="species"></td>
                        <td data-detail="castec3s" data-index="4" data-source="species"></td>
                        <td data-detail="castec3s" data-index="5" data-source="species"></td>
                        <td data-detail="castec3s" data-index="6" data-source="species"></td>
                    </tr>
                <tr>
                    <td><span data-detail="c4" data-source="species"></span></td>
                    <td><span data-detail="c4val" data-source="species"></span></td>
                    <td data-detail="genderc4s" data-index="0" data-source="species"></td>
                    <td data-detail="genderc4s" data-index="1" data-source="species"></td>
                    <td data-detail="genderc4s" data-index="2" data-source="species"></td>
                    <td data-detail="genderc4s" data-index="3" data-source="species"></td>
                    <td data-detail="genderc4s" data-index="4" data-source="species"></td>
                    <td data-detail="genderc4s" data-index="5" data-source="species"></td>
                    <td data-detail="genderc4s" data-index="6" data-source="species"></td>
                    <td data-detail="castec4s" data-index="0" data-source="species"></td>
                    <td data-detail="castec4s" data-index="1" data-source="species"></td>
                    <td data-detail="castec4s" data-index="2" data-source="species"></td>
                    <td data-detail="castec4s" data-index="3" data-source="species"></td>
                    <td data-detail="castec4s" data-index="4" data-source="species"></td>
                    <td data-detail="castec4s" data-index="5" data-source="species"></td>
                    <td data-detail="castec4s" data-index="6" data-source="species"></td>
                </tr>
                <tr>
                    <td><span data-detail="c5" data-source="species"></span></td>
                    <td><span data-detail="c5val" data-source="species"></span></td>
                    <td data-detail="genderc5s" data-index="0" data-source="species"></td>
                    <td data-detail="genderc5s" data-index="1" data-source="species"></td>
                    <td data-detail="genderc5s" data-index="2" data-source="species"></td>
                    <td data-detail="genderc5s" data-index="3" data-source="species"></td>
                    <td data-detail="genderc5s" data-index="4" data-source="species"></td>
                    <td data-detail="genderc5s" data-index="5" data-source="species"></td>
                    <td data-detail="genderc5s" data-index="6" data-source="species"></td>
                    <td data-detail="castec5s" data-index="0" data-source="species"></td>
                    <td data-detail="castec5s" data-index="1" data-source="species"></td>
                    <td data-detail="castec5s" data-index="2" data-source="species"></td>
                    <td data-detail="castec5s" data-index="3" data-source="species"></td>
                    <td data-detail="castec5s" data-index="4" data-source="species"></td>
                    <td data-detail="castec5s" data-index="5" data-source="species"></td>
                    <td data-detail="castec5s" data-index="6" data-source="species"></td>
                </tr>
                <tr>
                    <td><span data-detail="c6" data-source="species"></span></td>
                    <td><span data-detail="c6val" data-source="species"></span></td>
                    <td data-detail="genderc6s" data-index="0" data-source="species"></td>
                    <td data-detail="genderc6s" data-index="1" data-source="species"></td>
                    <td data-detail="genderc6s" data-index="2" data-source="species"></td>
                    <td data-detail="genderc6s" data-index="3" data-source="species"></td>
                    <td data-detail="genderc6s" data-index="4" data-source="species"></td>
                    <td data-detail="genderc6s" data-index="5" data-source="species"></td>
                    <td data-detail="genderc6s" data-index="6" data-source="species"></td>
                    <td data-detail="castec6s" data-index="0" data-source="species"></td>
                    <td data-detail="castec6s" data-index="1" data-source="species"></td>
                    <td data-detail="castec6s" data-index="2" data-source="species"></td>
                    <td data-detail="castec6s" data-index="3" data-source="species"></td>
                    <td data-detail="castec6s" data-index="4" data-source="species"></td>
                    <td data-detail="castec6s" data-index="5" data-source="species"></td>
                    <td data-detail="castec6s" data-index="6" data-source="species"></td>
                </tr>
                <tr>
                    <td colspan="2">Special Abilities</td>
                    <td data-detail="genderabilities" data-index="0" data-source="species"></td>
                    <td data-detail="genderabilities" data-index="1" data-source="species"></td>
                    <td data-detail="genderabilities" data-index="2" data-source="species"></td>
                    <td data-detail="genderabilities" data-index="3" data-source="species"></td>
                    <td data-detail="genderabilities" data-index="4" data-source="species"></td>
                    <td data-detail="genderabilities" data-index="5" data-source="species"></td>
                    <td data-detail="genderabilities" data-index="6" data-source="species"></td>
                    <td data-detail="casteabilities" data-index="0" data-source="species"></td>
                    <td data-detail="casteabilities" data-index="1" data-source="species"></td>
                    <td data-detail="casteabilities" data-index="2" data-source="species"></td>
                    <td data-detail="casteabilities" data-index="3" data-source="species"></td>
                    <td data-detail="casteabilities" data-index="4" data-source="species"></td>
                    <td data-detail="casteabilities" data-index="5" data-source="species"></td>
                    <td data-detail="casteabilities" data-index="6" data-source="species"></td>
                </tr>
                </table>
                <table class="table">
                    <tr>
                        <th>Gender</th>
                        <th>2D</th>
                        <th>Caste</th>
                    </tr>
                    <tr>
                        <td><span data-detail="gender2" data-source="species"></span></td>
                        <td>2</td>
                        <td><span data-detail="caste2" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender3" data-source="species"></span></td>
                        <td>3</td>
                        <td><span data-detail="caste3" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender4" data-source="species"></span></td>
                        <td>4</td>
                        <td><span data-detail="caste4" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender5" data-source="species"></span></td>
                        <td>5</td>
                        <td><span data-detail="caste5" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender6" data-source="species"></span></td>
                        <td>6</td>
                        <td><span data-detail="caste6" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender7" data-source="species"></span></td>
                        <td>7</td>
                        <td><span data-detail="caste7" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender8" data-source="species"></span></td>
                        <td>8</td>
                        <td><span data-detail="caste8" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender9" data-source="species"></span></td>
                        <td>9</td>
                        <td><span data-detail="caste9" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender10" data-source="species"></span></td>
                        <td>10</td>
                        <td><span data-detail="caste10" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender11" data-source="species"></span></td>
                        <td>11</td>
                        <td><span data-detail="caste11" data-source="species"></span></td>
                    </tr>
                    <tr>
                        <td><span data-detail="gender12" data-source="species"></span></td>
                        <td>12</td>
                        <td><span data-detail="caste12" data-source="species"></span></td>
                    </tr>
                </table>
                <fieldset>
                    <legend>Roll for Special</legend>
                    <input type="button" value="Roll for Special Ability" id="btnGetSpecialAbility"/>
                    <br/><span id="specialAbility"></span>
                    <div data-if="Skilled" data-ifdetail="castestructure" data-source="species">
                        <input type="button" value="Roll for Skilled Caste" id="btnGetCasteSkill"/>
                        <br/><span id="casteSkill"></span>
                    </div>
                </fieldset>
                
                
        </fieldset></td>
        </tr>
        
    </table>
    <ul class="statnotes"></ul>
    <hr/>
    <fieldset class="collapsed">
        <legend>Data</legend>
        <fieldset>
            <legend>JSON</legend>
            <textarea id="json" rows="10" cols="50"></textarea><br/>
            
            <input type="button" value="Apply above JSON" id="btnLoadFromJson"/>
        </fieldset>
    </fieldset>
    
</body>
<script>
    var abilityRoll = 0, skillRoll = 0;
    document.getElementById("slctStyle").addEventListener("change",function(){
        var style = document.getElementById("slctStyle").value;
        document.body.className = style;
    });
    document.getElementById("btnGetSpecialAbility").addEventListener("click",function(){
        var output = document.getElementById("specialAbility");
        removeChildElements(output);
        output.innerHTML = "Roll " + ++abilityRoll + ": " + getRandomSpecialAbility();
    });
    document.getElementById("btnGetCasteSkill").addEventListener("click",function(){
        var output = document.getElementById("casteSkill");
        removeChildElements(output);
        output.innerHTML = "Roll " + ++skillRoll + ": " + getCasteSkill();
    });
    document.getElementById("chkRandomHomeworld").addEventListener("change",function(){
        var manual = !(document.getElementById("chkRandomHomeworld").checked);
        if(manual){
            
            document.getElementById("homeworldcontainer").classList.remove("hidden");
        }else{
            document.getElementById("homeworldcontainer").classList.add("hidden");
        }
    });
     var collapserHandles = document.querySelectorAll("fieldset legend");
    for(var i = 0, len = collapserHandles.length; i < len; i++){
        var handle = collapserHandles[i];
        handle.addEventListener("click",function(e){
            var parent = e.target.parentElement;
            if(parent.classList.contains("collapsed")){
                parent.classList.remove("collapsed");
            }else{
                parent.classList.add("collapsed");
            }
        });
    }
    if(window.location.hash){
        processHash();
    }
    NameGenerator("js/names.jsonc",setup,null,MathRandom);
    document.getElementById("btnLoadFromJson").addEventListener("click",function(){
        var json = document.getElementById("json").value;
        var species = JSON.parse(json);
        renderDetails(species);
    });
    document.getElementById("btnExportJSON").addEventListener("click",function(){
        var data = document.getElementById("json").value;
        var species = JSON.parse(data);
        var a = document.createElement("a");
        a.href = "data:text/json;charset=utf-8,"+encodeURIComponent(data);
        a.download = species.name + " of " +species.homeworld.name +".json";
        a.click();
    });
    document.getElementById("btnImportJSON").addEventListener("change", function(){
        var curFiles = document.getElementById("btnImportJSON").files;
        if(curFiles.length > 0){
            var reader = new FileReader();
            reader.onload = function(event){
                document.getElementById("json").value = event.target.result;
                document.getElementById("btnLoadFromJson").click();
                //document.getElementById("txtSeed").value = curFiles[0].name.replace(".json","");
            }
            reader.readAsText(curFiles[0]);
        }
    });
    function processHash(){
        var seed = window.location.hash.substr(1);
        document.getElementById("txtSeed").value = decodeURI(seed);
        document.getElementById("chkUseRandom").checked = false;
        MathRandom = pseudoRandomNumberGenerator(decodeURI(seed));
    }
    function setup(generator){
        document.getElementById("txtSeed").addEventListener("keyup",function(e){
            if(e.keyCode == 13){
                MathRandom = pseudoRandomNumberGenerator(this.value);
                generator.setRandom(MathRandom);
                document.getElementById("chkUseRandom").checked = false;
                renderDetails(generateRandomAlien(initializeRandomSpecies(generator),MathRandom));
            }                   
        });
        window.addEventListener("hashchange", function(){
            var hash = window.location.hash;
            if(hash.length > 0){
                var seed = hash.substring(1);
                var newValue = decodeURI(seed);
                if(document.getElementById("txtSeed").value == newValue){

                }else{
                    document.getElementById("txtSeed").value = newValue;
                    var wasChecked = document.getElementById("chkUseRandom").checked;
                    document.getElementById("chkUseRandom").checked = false;
                    renderDetails(generateRandomAlien(initializeRandomSpecies(generator),MathRandom));
                    document.getElementById("chkUseRandom").checked = wasChecked;
                }
            }
        });
        var species = initializeRandomSpecies(generator);
        renderDetails(generateRandomAlien(species,MathRandom));
       
        document.getElementById("btnGenerate").addEventListener("click", function(){
            renderDetails(generateRandomAlien(initializeRandomSpecies(generator),MathRandom));
        });
    }
    function initializeRandomSpecies(generator){
        var useRandomSeed = document.getElementById("chkUseRandom").checked;
        var seed;
        if(useRandomSeed){ 
            var seed1 = Math.floor(Math.random()*1000000);
            seed = addCaps(generator.getRandomName("system")+seed1);
            document.getElementById("txtSeed").value = seed;
            
        }else{
            seed = document.getElementById("txtSeed").value
        } 
        window.location.hash = encodeURI(seed);
        MathRandom = pseudoRandomNumberGenerator(seed.toString());
        generator.setRandom(MathRandom);
        var species = {};
        species.name = addCaps(generator.getRandomName("word"));
        var systemName = document.getElementById("inWorldName").value;
        if(document.getElementById("chkRandomHomeworld").checked){
            systemName = addCaps(generator.getRandomName("system"));
            species.homeworld = generateSystemDetails(
                systemName, 
                8, // gas giant frequency
                16 // max tech level
            );
            while(species.homeworld.mainworld.atmo < 2 || species.homeworld.mainworld.pop < 7){
                species.homeworld  = generateSystemDetails(species.homeworld.name, 8, 16);
            }
            species.homestar = species.homeworld.stars.primary.type + (typeof species.homeworld.stars.primary.decimal === "undefined" ? "" : species.homeworld.stars.primary.decimal)  + species.homeworld.stars.primary.size;
        }else{
            var throwawayName = generator.getRandomName("system");
            var throwawayWorld = generateSystemDetails(throwawayName,8,16);
            while(throwawayWorld.mainworld.atmo < 2 || throwawayWorld.mainworld.pop < 7){
                throwawayWorld  = generateSystemDetails(throwawayWorld.name, 8, 16);
            }
            species.homeworld = {};
            species.homeworld.name = systemName;
            species.homeworld.uwp = document.getElementById("inUWP").value;
            species.homeworld.mainworld = {};
            species.homeworld.mainworld.size = parseInt(species.homeworld.uwp[1],16);
            species.homeworld.mainworld.atmo = parseInt(species.homeworld.uwp[2],16);
            species.homeworld.mainworld.hydro = parseInt(species.homeworld.uwp[3],16);
            var tc = [];
            if(document.getElementById("inTradeCodes").value.length > 0){
                tc = document.getElementById("inTradeCodes").value.split(",");
            }
            species.homeworld.tradecodes = tc;
            species.homeworld.mainworld.tradecodes = tc;
            species.homeworld.mainworld.uwp =  species.homeworld.uwp;
            var climate = "Temperate.";
            if(tc.indexOf("Tr") >= 0){
                climate = "Tropic.";
            }else if(tc.indexOf("Ho") >= 0){
                climate = "Hot.";
            }else if(tc.indexOf("Tu") >= 0){
                climate = "Tundra.";
            }else if(tc.indexOf("Co") >= 0){
                climate = "Cold.";
            }else if(tc.indexOf("Fr") >= 0){
                climate = "Frozen.";
            }
            species.homeworld.mainworld.climate = climate;
            species.homeworld.stars = {};
            species.homeworld.stars.primary = {};
            species.homeworld.stars.primary.type =  document.getElementById("inStarType").value;
            var decimal = document.getElementById("inStarDecimal").value
            if(decimal.length > 0){ species.homeworld.stars.primary.decimal = decimal; }
            species.homeworld.stars.primary.size = document.getElementById("inStarSize").value;
            species.homestar = species.homeworld.stars.primary.type + (typeof species.homeworld.stars.primary.decimal === "undefined" ? "" : species.homeworld.stars.primary.decimal)  + species.homeworld.stars.primary.size;
        }
        return species;
    }
    function renderDetails(species){
        document.getElementById("inWorldName").value = species.homeworld.name;
        document.getElementById("inUWP").value = species.homeworld.uwp;
        document.getElementById("inStarType").value = species.homeworld.stars.primary.type;
        document.getElementById("inStarSize").value = species.homeworld.stars.primary.size;
        document.getElementById("inStarDecimal").value = typeof species.homeworld.stars.primary.decimal === "undefined" ? "" : species.homeworld.stars.primary.decimal;
        document.getElementById("inTradeCodes").value = species.homeworld.mainworld.tradecodes;
        console.log(species);
        var elmtName = document.getElementById("name");
        removeChildElements(elmtName);
        
        elmtName.appendChild(document.createTextNode("The " + species.name + " of " + species.homeworld.name));
        document.querySelectorAll("[data-detail]").forEach(function(elmt){
            var source = elmt.getAttribute("data-source");
            var detail = elmt.getAttribute("data-detail");
            var value = source === "species" ? species[detail] : ( source === "mainworld" ? species.homeworld.mainworld[detail] : species[source][detail]);
            if(elmt.getAttribute("data-index")){
                value = value[+(elmt.getAttribute("data-index"))];
            }
            removeChildElements(elmt);
            if(typeof value !== "undefined"){
                if(elmt.getAttribute("data-html")){                            
                    elmt.insertAdjacentHTML("beforeend", value);
                }else{
                    elmt.appendChild(document.createTextNode(value));
                }
            }
        });
        document.querySelectorAll("[data-if]").forEach(function(elmt){
            var source = elmt.getAttribute("data-source");
            var detail = elmt.getAttribute("data-ifdetail");
            var value = source === "species" ? species[detail] : ( source === "mainworld" ? species.homeworld.mainworld[detail] : species[source][detail]);
            var target = elmt.getAttribute("data-if");
            if(value === target){
                elmt.classList.remove("hidden");
            }else{
                elmt.classList.add("hidden");
            }
        });
        document.getElementById("json").value = JSON.stringify(species);
        var noteContainer = document.querySelector(".statnotes");
        removeChildElements(noteContainer);
        var notes = species.statnotes;
        for(var i = 0; i < notes.length; i++){
            var note = notes[i];
            var noteElmt = document.createElement("li");
            noteElmt.classList.add("note");
            note = note.replace(/Strength/g,"<strong>Strength</strong>");
            note = note.replace(/Agility/g,"<strong>Agility</strong>");
            note = note.replace(/Grace/g,"<strong>Grace</strong>");
            note = note.replace(/Vigor/g,"<strong>Vigor</strong>");
            note = note.replace(/Stamina/g,"<strong>Stamina</strong>");
            note = note.replace(/Instinct/g,"<strong>Instinct</strong>");
            note = note.replace(/Training/g,"<strong>Training</strong>");
            note = note.replace(/Caste/g,"<strong>Caste</strong>");
            note = note.replace(/Charisma/g,"<strong>Charisma</strong>");
            noteElmt.insertAdjacentHTML("beforeend",note);
            noteContainer.appendChild(noteElmt);
        }
    }
    function removeChildElements(element){
        while(element.childNodes.length > 0){
            element.removeChild(element.childNodes[element.childNodes.length-1]);
        }
    }
    
    function addCaps(text) {
            var capitalizedString = "";
            var lastCharacter = null, currCharacter = " ";
            if(typeof text === "undefined"){return text;}
            for (var i = 0, len = text.length; i < len; i++) {
                lastCharacter = currCharacter;
                currCharacter = text[i];
                if (lastCharacter === " " || lastCharacter === "-") {
                    capitalizedString += currCharacter.toUpperCase();
                } else {
                    capitalizedString += currCharacter;
                }
            }
            return capitalizedString;
        }
</script>
</html>